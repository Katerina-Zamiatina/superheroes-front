(this["webpackJsonpsuperheroes-front"]=this["webpackJsonpsuperheroes-front"]||[]).push([[0],{2:function(e,t,a){e.exports={card:"HeroDetails_card__3yHQB",poster:"HeroDetails_poster__3kRpf",nickname:"HeroDetails_nickname__2X1dB",info:"HeroDetails_info__15Ob5",button:"HeroDetails_button__1VBFV",form:"HeroDetails_form__1Dpit",title:"HeroDetails_title__-gIuB",label:"HeroDetails_label__zZjt-",label__text:"HeroDetails_label__text__SaD8z",input:"HeroDetails_input__3A3Eo",hidden:"HeroDetails_hidden__2R0NL",dropArea:"HeroDetails_dropArea__12TlM",dropAreaActive:"HeroDetails_dropAreaActive__3-0Nl",labelImg:"HeroDetails_labelImg__11NGU",loadedImg:"HeroDetails_loadedImg__s1Fsy"}},23:function(e,t,a){e.exports={list:"HeroesList_list__1VT7H",listItem:"HeroesList_listItem__3SoNT","listItem-image":"HeroesList_listItem-image__39eFA",button:"HeroesList_button__16iRA"}},24:function(e,t,a){e.exports={card:"HeroCard_card__1lDI0",poster:"HeroCard_poster__2KTtS",title:"HeroCard_title__r8u9n"}},39:function(e,t,a){e.exports={header:"Header_header__1v0yI"}},40:function(e,t,a){e.exports={Container:"Container_Container__11SY1"}},43:function(e,t,a){e.exports={Button:"LoadMoreBtn_Button__2JiUI"}},7:function(e,t,a){e.exports={form:"Form_form__3wvE7",title:"Form_title__2Ws2W",label:"Form_label__1H9y1",label__text:"Form_label__text__O-8aA",input:"Form_input__1FXum",button:"Form_button__2ORia"}},92:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(38),s=a.n(c),i=a(17),o=a(5),l=a(39),u=a.n(l),p=a(0),b=function(){return Object(p.jsx)("div",{className:u.a.header,children:Object(p.jsx)("header",{children:Object(p.jsx)("h1",{children:"SUPERHEROES"})})})},j=a(18),h=a.n(j),d=a(3),m=a.n(d),f=a(20),O=a(9),x=a(8),v=a(15),_=a.n(v);_.a.defaults.baseURL="https://superheroes-test.herokuapp.com/heroes";var g=function(){var e=Object(O.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("",{params:{page:t,perPage:5}});case 3:return a=e.sent,r=a.data,n=r.heroes,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("/".concat(t));case 3:return a=e.sent,r=a.data,n=r.hero,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("",t);case 3:return a=e.sent,r=a.data,n=r.hero,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.delete("/".concat(t));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(O.a)(m.a.mark((function e(t,a){var r,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.patch("/".concat(t),a);case 3:return r=e.sent,n=r.data,c=n.hero,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),y=a(40),C=a.n(y),E=function(e){var t=e.children;return Object(p.jsx)("div",{className:C.a.Container,children:t})},S=a(23),H=a.n(S),L=a(24),I=a.n(L),A=a.p+"static/media/defaultImg.2e01288c.jpeg",P=function(e){var t=e.nick,a=e.img,r=a||A;return Object(p.jsxs)("div",{className:I.a.card,children:[Object(p.jsx)("img",{className:I.a.poster,src:r,alt:t}),Object(p.jsx)("h1",{className:I.a.title,children:t})]})},F=function(e){var t=e.heroes,a=e.onDelete,r=Object(o.f)();return Object(p.jsx)("div",{children:Object(p.jsx)("ul",{className:H.a.list,children:null===t||void 0===t?void 0:t.map((function(e){var t=e._id,n=e.nickname,c=e.img;return Object(p.jsxs)("li",{className:H.a.listItem,children:[Object(p.jsx)(i.b,{to:{pathname:"hero/".concat(t),state:{from:r}},children:Object(p.jsx)(P,{nick:n,img:c})}),Object(p.jsx)("button",{className:H.a.button,onClick:function(){return a(t)},children:"Delete"})]},t)}))})})},R=a(43),U=a.n(R),B=function(e){var t=e.onClick;return Object(p.jsx)("button",{type:"button",className:U.a.Button,onClick:t,children:"Load more"})},T=a(19),q=a(14),M=a(7),J=a.n(M),V=function(e){var t=e.onAdd,a=e.isUnique,n=Object(r.useState)({nickname:"",realName:"",originDescription:"",superpowers:"",catchPhrase:""}),c=Object(x.a)(n,2),s=c[0],i=c[1],o=function(e){return i(Object(q.a)(Object(q.a)({},s),{},Object(T.a)({},e.target.name,e.target.value)))},l=function(){i({nickname:"",realName:"",originDescription:"",superpowers:"",catchPhrase:""})};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:J.a.title,children:"You can add your favorite hero"}),Object(p.jsxs)("form",{className:J.a.form,onSubmit:function(e){e.preventDefault();var r={nickname:s.nickname,realName:s.realName,originDescription:s.originDescription,superpowers:s.superpowers,catchPhrase:s.catchPhrase};a(s.nickname)&&(t(r),alert("".concat(s.nickname," successfully added"))),l()},children:[Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("span",{className:J.a.label__text,children:"Nickname"}),Object(p.jsx)("input",{className:J.a.input,type:"text",name:"nickname",placeholder:"Enter nickname",value:s.nickname,onChange:o,required:!0})]}),Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("span",{className:J.a.label__text,children:"Real name"}),Object(p.jsx)("input",{className:J.a.input,type:"text",name:"realName",placeholder:"Enter real name",value:s.realName,onChange:o,required:!0})]}),Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("span",{className:J.a.label__text,children:"Super powers"}),Object(p.jsx)("input",{className:J.a.input,type:"text",name:"superpowers",placeholder:"Describe heroe's super powers",value:s.superpowers,onChange:o,required:!0})]}),Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("span",{className:J.a.label__text,children:"Catch phrase"}),Object(p.jsx)("input",{className:J.a.input,type:"text",name:"catchPhrase",placeholder:"Enter catch phrase",value:s.catchPhrase,onChange:o,required:!0})]}),Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("span",{className:J.a.label__text,children:"Original description"}),Object(p.jsx)("input",{className:J.a.input,type:"text",name:"originDescription",placeholder:"Enter description",value:s.originDescription,onChange:o})]}),Object(p.jsx)("button",{type:"submit",className:J.a.button,children:"Add hero"})]})]})},W=function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(0),s=Object(x.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)([]),u=Object(x.a)(l,2),b=u[0],j=u[1],d=Object(r.useState)(null),v=Object(x.a)(d,2),_=v[0],N=v[1];Object(r.useEffect)((function(){D()}),[]);var D=function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,g(i);case 4:t=e.sent,n((function(e){return[].concat(Object(f.a)(e),Object(f.a)(t))})),o((function(e){return e+1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),N(e.t0);case 12:return e.prev=12,j(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t);case 3:a=e.sent,n((function(e){return[].concat(Object(f.a)(e),[a])})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0);case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:return a=e.sent,n((function(e){return e.filter((function(e){return e._id!==t}))})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),N(e.t0);case 11:return e.prev=11,j(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),S=a.length>0&&!b;return Object(p.jsxs)(E,{children:[Object(p.jsx)(V,{heroes:a,onAdd:y,isUnique:function(e){var t=!!a.find((function(t){return t.nickname===e}));return t&&alert("".concat(e," is already exist")),!t}}),a?Object(p.jsx)(F,{heroes:a,onDelete:C}):Object(p.jsxs)("p",{children:["Something went wrong: ",_.message]}),b&&Object(p.jsx)(h.a,{type:"ThreeDots",color:"#4c4e59",height:80,width:80,className:"Loader"}),S&&Object(p.jsx)(B,{onClick:D})]})},z=a(4),X=a.n(z),Y=["drop","dragover"],G=["dragenter","dragleave"],K=["drop"],Q=function(e){var t=Object(r.useState)(null),a=Object(x.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(x.a)(s,2),o=i[0],l=i[1],u=Object(r.useCallback)((function(e){e.preventDefault()}),[]),p=Object(r.useCallback)((function(e){var t,a=null===e||void 0===e||null===(t=e.dataTransfer)||void 0===t?void 0:t.files,r=Object(x.a)(a,1)[0];c(r),l(!1)}),[]),b=Object(r.useCallback)((function(e){return function(){(null===e||void 0===e?void 0:e.includes("dragenter"))?l(!0):l(!1)}}),[]);return Object(r.useEffect)((function(){if(null===e||void 0===e?void 0:e.current){var t=e.current;Y.forEach((function(e){t.addEventListener(e,u)})),G.forEach((function(e){t.addEventListener(e,b(e))})),K.forEach((function(e){t.addEventListener(e,p)}))}return function(){if(null===e||void 0===e?void 0:e.current){var t=e.current;Y.forEach((function(e){t.removeEventListener(e,u)})),G.forEach((function(e){t.removeEventListener(e,b(e))})),K.forEach((function(e){t.removeEventListener(e,p)}))}}}),[null===e||void 0===e?void 0:e.current]),{file:n,active:o}},Z=function(e){var t=Object(r.useState)(!1),a=Object(x.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(null),i=Object(x.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){e&&h(e)}),[e]);var u=Object(r.useMemo)((function(){return new FileReader}),[]),p=function(){c(!0)},b=function(){c(!1)},j=function(e){var t=((null===e||void 0===e?void 0:e.currentTarget)||{}).result;l(t)},h=function(e){if(!e)throw new Error("[useFileReader]: startReading => provide a file");u.readAsDataURL(e),u.onloadstart=p,u.onloadend=b,u.onload=j};return{isLoading:n,fileUrl:o}},$=a(2),ee=a.n($),te=function(e){var t=e.hero,a=e.onChange,n=e.onSubmit,c=e.onChangeImg,s=Object(r.useRef)(null),i=Q(s),o=i.file,l=i.active,u=Z(o),b=u.fileUrl,j=u.isLoading,h=t.nickname,d=t.realName,m=t.originDescription,f=t.superpowers,O=t.catchPhrase,x=t.img,v=x||A,_=l?ee.a.dropAreaActive:"";return Object(p.jsx)("article",{children:Object(p.jsxs)("div",{className:ee.a.card,children:[Object(p.jsx)("img",{className:ee.a.poster,src:v,alt:h}),Object(p.jsx)("h1",{className:ee.a.nickname,children:h}),Object(p.jsxs)("p",{className:ee.a.info,children:["Real name : ",d]}),Object(p.jsxs)("p",{className:ee.a.info,children:["Description: ",m]}),Object(p.jsxs)("p",{className:ee.a.info,children:["Powers: ",f]}),Object(p.jsxs)("p",{className:ee.a.info,children:["Phrase: ",O]}),Object(p.jsx)("h2",{className:ee.a.title,children:"Want to update smth? "}),Object(p.jsxs)("form",{className:ee.a.form,onSubmit:n,children:[Object(p.jsxs)("label",{className:ee.a.label,children:[Object(p.jsx)("span",{className:ee.a.label__text,children:"Nickname"}),Object(p.jsx)("input",{className:ee.a.input,type:"text",name:"nickname",placeholder:"Enter nickname",onChange:a})]}),Object(p.jsxs)("label",{className:ee.a.label,children:[Object(p.jsx)("span",{className:ee.a.label__text,children:"Real name"}),Object(p.jsx)("input",{className:ee.a.input,type:"text",name:"realName",placeholder:"Enter real name",onChange:a})]}),Object(p.jsxs)("label",{className:ee.a.label,children:[Object(p.jsx)("span",{className:ee.a.label__text,children:"Super powers"}),Object(p.jsx)("input",{className:ee.a.input,type:"text",name:"superpowers",placeholder:"Describe heroe's super powers",onChange:a})]}),Object(p.jsxs)("label",{className:ee.a.label,children:[Object(p.jsx)("span",{className:ee.a.label__text,children:"Catch phrase"}),Object(p.jsx)("input",{className:ee.a.input,type:"text",name:"catchPhrase",placeholder:"Enter catch phrase",onChange:a})]}),Object(p.jsxs)("label",{className:ee.a.label,children:[Object(p.jsx)("span",{className:ee.a.label__text,children:"Original description"}),Object(p.jsx)("input",{className:ee.a.input,type:"text",name:"originDescription",placeholder:"Enter description",onChange:a})]}),Object(p.jsx)("button",{type:"submit",className:ee.a.button,children:"Update hero"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{id:"upload",className:ee.a.hidden,type:"file",onChange:c}),Object(p.jsxs)("div",{ref:s,className:"".concat(ee.a.dropArea," ").concat(_),children:[j?"loading...":"Drop image here or click",Object(p.jsx)("label",{htmlFor:"upload",className:ee.a.labelImg})]}),b&&Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:b,alt:"",className:ee.a.loadedImg})})]}),Object(p.jsx)("button",{type:"submit",className:ee.a.button,children:"Update hero image"})]})]})})};te.defaultProps={hero:X.a.shape({nickname:"",realName:"",img:A,originDescription:"",superpowers:"",catchPhrase:""})};var ae=te,re=function(){var e=Object(o.f)().pathname.split("/").slice(-1),t=Object(r.useState)(null),a=Object(x.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(x.a)(s,2),l=i[0],u=i[1],b=Object(r.useState)(null),j=Object(x.a)(b,2),d=j[0],v=j[1];Object(r.useEffect)((function(){_()}),[]);var _=function(){var t=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,N("".concat(e));case 4:a=t.sent,c(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),v(t.t0);case 11:return t.prev=11,u(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,a);case 3:return r=e.sent,c(r),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),v(e.t0);case 11:return e.prev=11,u(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,a);case 3:return r=e.sent,c((function(e){return[].concat(Object(f.a)(e),[r])})),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),v(e.t0);case 11:return e.prev=11,u(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){c({nickname:"",realName:"",originDescription:"",superpowers:"",catchPhrase:""})};return Object(p.jsxs)(E,{children:[l&&Object(p.jsx)(h.a,{type:"ThreeDots",color:"#4c4e59",height:80,width:80,className:"Loader"}),n&&Object(p.jsx)(ae,{hero:n,onChange:function(e){c(Object(q.a)(Object(q.a)({},n),{},Object(T.a)({},e.target.name,e.target.value)))},onSubmit:function(t){t.preventDefault();var a=Object(q.a)(Object(q.a)({},n),{},{nickname:n.nickname,realName:n.realName,originDescription:n.originDescription,superpowers:n.superpowers,catchPhrase:n.catchPhrase});g(e,a),alert("".concat(n.nickname," successfully updated")),w()},onChangeImg:k}),d&&Object(p.jsxs)("p",{children:["Something went wrong: ",d.message]})]})},ne=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b,{}),Object(p.jsx)(r.Suspense,{fallback:Object(p.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:80,width:80,className:"Loader"}),children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/superheroes-front",component:W}),Object(p.jsx)(o.a,{path:"/hero",component:re})]})})]})};a(92),a(93);s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(ne,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.540b5c66.chunk.js.map